<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Tools</title>

    <!-- You can use your own page style. -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script>
        (function applyStyle() {
            const style = document.createElement('style');
            style.textContent = `
                textarea {
                    min-height: 58vh;
                }

                #directoryContainer {
                    display: none;
                    max-height: 200px;
                    overflow-y: auto;
                }
            `;
            document.head.appendChild(style);
        })();
    </script>

</head>

<body>
    <div class="md:p-8 p-0 bg-gray-100 dark:bg-gray-900">
        <div class="max-w-7xl mx-auto bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mt-10">
            <div class="md:grid md:grid-cols-3 md:gap-6">
                <div class="md:col-span-1">
                    <label for="username" class="block text-sm font-medium text-gray-700 dark:text-gray-300">GitHub
                        Username:</label>
                    <input type="text" id="username"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-gray-300 sm:text-sm"
                        required>

                    <label for="token" class="block mt-4 text-sm font-medium text-gray-700 dark:text-gray-300">Personal
                        Access Token:</label>
                    <input type="password" id="token"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-gray-300 sm:text-sm"
                        required>

                    <label for="repo" class="block mt-4 text-sm font-medium text-gray-700 dark:text-gray-300">Repository
                        Name:</label>
                    <input type="text" id="repo"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-gray-300 sm:text-sm"
                        required>

                    <label for="branch"
                        class="block mt-4 text-sm font-medium text-gray-700 dark:text-gray-300">Branch:</label>
                    <input type="text" id="branch"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-gray-300 sm:text-sm"
                        required>

                    <label for="filePath" class="block mt-4 text-sm font-medium text-gray-700 dark:text-gray-300">File
                        Path:</label>
                    <div class="flex mt-1">
                        <input type="text" id="filePath"
                            class="block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-gray-300 sm:text-sm"
                            required>
                        <button onclick="resetFilePath()"
                            class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-r-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300">&lt;</button>
                        <button id="directoryBtn" onclick="toggleDirectory(this)"
                            class="ml-2 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300">Show</button>
                    </div>

                    <div id="directoryContainer"
                        class="mt-4 p-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-50 dark:bg-gray-700">
                        <ul id="directoryList" class="list-disc list-inside"></ul>
                    </div>
                </div>
                <div class="md:col-span-2 mt-6 md:mt-0">
                    <button onclick="syncContent(this)"
                        class="w-full px-4 py-2 mb-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 dark:bg-indigo-700 hover:bg-indigo-700 dark:hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Sync
                        content</button>

                    <label for="content"
                        class="block text-sm font-medium text-gray-700 dark:text-gray-300">Content:</label>
                    <textarea id="content"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-gray-300 sm:text-sm"></textarea>

                    <label for="commitMessage"
                        class="block mt-4 text-sm font-medium text-gray-700 dark:text-gray-300">Commit Message:</label>
                    <input type="text" id="commitMessage"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-gray-300 sm:text-sm"
                        required>

                    <div class="mt-4 flex justify-between">
                        <button id="pushBtn" onclick="pushToGitHub(this)"
                            class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">Push
                            to GitHub</button>
                        <button onclick="deleteFile(this)"
                            class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 dark:bg-red-700 hover:bg-red-700 dark:hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">Delete
                            File</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- HOW TO USE -->
    <!-- You can use your own page style. -->
    <!-- Add required elements & inputsToRemember variable, along with CryptoJS & editor script, and dont forget to call functions in the button's onclick attribute  -->
    <script>
        const elements = {
            username: document.getElementById('username'),
            token: document.getElementById('token'),
            repo: document.getElementById('repo'),
            branch: document.getElementById('branch'),
            filePath: document.getElementById('filePath'),
            content: document.getElementById('content'),
            commitMessage: document.getElementById('commitMessage'),
            pushBtn: document.getElementById('pushBtn'),
            dirContainer: document.getElementById('directoryContainer'),
            dirBtn: document.getElementById('directoryBtn'),
            dirList: document.getElementById('directoryList')
        };

        const inputsToRemember = [
            { input: elements.username, identifier: "GHUsername" },
            { input: elements.token, identifier: "GHToken" },
            { input: elements.repo, identifier: "GHRepo" },
            { input: elements.branch, identifier: "GHBranch", defaultValue: "main" },
            { input: elements.filePath, identifier: "GHFilePath", defaultValue: "src/content/blog/" },
            { input: elements.content, identifier: "GHContent" }
        ];
    </script>
    <script src="crypto-js.min.js"></script>
    <script src="editor.js"></script>
</body>

</html>