const getInputs=()=>({username:elements.username.value,repo:elements.repo.value,filePath:elements.filePath.value,token:elements.token.value,branch:elements.branch.value});(function e(){const t=document.createElement("style");t.textContent=`\n        [disabled] {\n            background-color: #d1d5db; /* gray-300 */\n            color: #4b5563;           /* gray-700 */\n            cursor: not-allowed;\n            opacity: 0.6;\n        }\n    `;document.head.appendChild(t)})();const toggleDirectory=(()=>{let e=false;let t=[];const n=async e=>{e.disabled=true;const{username:n,repo:s,token:a}=getInputs();const i=`https://api.github.com/repos/${n}/${s}/contents/${elements.filePath.value}`;doFetch(i,{method:"GET",headers:{Authorization:`token ${a}`,"Content-Type":"application/json"}},{onSuccess:e=>{t=e;o()},onError:alert,onFinish:()=>{e.disabled=false}})};const o=()=>{const e=elements.dirList;e.innerHTML="";t.forEach((t=>{const n=document.createElement("li");n.textContent=`${t.name}`;n.style.cursor="pointer";n.onclick=()=>{elements.dirContainer.style.display="none";elements.dirBtn.textContent="Show";elements.filePath.value=`${elements.filePath.value}${t.name}`};e.appendChild(n)}))};return async t=>{if(!e){await n(t);e=true}if(elements.dirContainer.style.display==="none"){elements.dirContainer.style.display="block";elements.dirBtn.textContent="Hide"}else{elements.dirContainer.style.display="none";elements.dirBtn.textContent="Show"}}})();const resetFilePath=()=>{elements.filePath.value=inputsToRemember.find((e=>e.input===elements.filePath)).defaultValue};const togglePushButton=(()=>{elements.pushBtn.disabled=elements.commitMessage.value.length===0;elements.commitMessage.addEventListener("input",(()=>{elements.pushBtn.disabled=elements.commitMessage.value.length===0}))})();const syncContent=async e=>{e.disabled=true;const{username:t,repo:n,filePath:o,token:s}=getInputs();const a=`https://api.github.com/repos/${t}/${n}/contents/${o}`;doFetch(a,{method:"GET",headers:{Authorization:`token ${s}`,"Content-Type":"application/json"}},{onSuccess:e=>{const t=atob(e.content);elements.content.value=t},onError:e=>{alert(e);const t=inputsToRemember.find((e=>e.input===elements.content)).identifier;localStorage.removeItem(t);location.reload()},onFinish:()=>{e.disabled=false}})};const deleteFile=async e=>{if(!confirm("Are you sure you want to delete this file?"))return;e.disabled=true;const{username:t,repo:n,filePath:o,token:s,branch:a}=getInputs();const i=`https://api.github.com/repos/${t}/${n}/contents/${o}`;doFetch(i,{method:"DELETE",headers:{Authorization:`token ${s}`,Accept:"application/vnd.github.v3+json"},body:JSON.stringify({message:`Deleting file: ${o}`,sha:await getSha(i,s),branch:a})},{onSuccess:()=>alert("File deleted successfully."),onError:alert,onFinish:()=>{const e=inputsToRemember.find((e=>e.input===elements.content)).identifier;localStorage.removeItem(e);location.reload()}})};const pushToGitHub=async e=>{e.disabled=true;const{username:t,repo:n,branch:o,token:s,filePath:a}=getInputs();if(!elements.content.value){e.disabled=false;return alert("Content is empty")}const i=btoa(elements.content.value);const l=`https://api.github.com/repos/${t}/${n}/contents/${a}`;doFetch(l,{method:"PUT",headers:{Authorization:`token ${s}`,"Content-Type":"application/json"},body:JSON.stringify({message:elements.commitMessage.value,content:i,branch:o,sha:await getSha(l,s)})},{onSuccess:()=>alert("File pushed successfully."),onError:alert,onFinish:()=>{const e=inputsToRemember.find((e=>e.input===elements.content)).identifier;localStorage.removeItem(e);location.reload()}})};const remember=(e=>{const t="your-base-key";const n=e=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";const o=t.length;for(let s=0;s<e;s++){n+=t.charAt(Math.floor(Math.random()*o))}return n};const o=e=>{const o=n(16);localStorage.setItem(`${e}_key`,o);return t+o};const s=e=>{let o=localStorage.getItem(`${e}_key`);if(!o){o=n(16);localStorage.setItem(`${e}_key`,o)}return t+o};const a=({input:e,identifier:t,defaultValue:n=null})=>{const o=localStorage.getItem(t);if(o){const n=s(t);const a=CryptoJS.AES.decrypt(o,n);e.value=a.toString(CryptoJS.enc.Utf8)}else if(n!==null){e.value=n}e.addEventListener("input",(e=>{const n=s(t);const o=CryptoJS.AES.encrypt(e.target.value,n).toString();localStorage.setItem(t,o)}))};const i=(e,t)=>{const n=()=>{const s=o(e);const a=CryptoJS.AES.encrypt(t.value,s).toString();localStorage.setItem(e,a);setTimeout(n,1*60*1e3)};setTimeout(n,1*60*1e3)};e.forEach((e=>{a(e);i(e.identifier,e.input)}))})(inputsToRemember);const doFetch=async(e,t,{onSuccess:n,onError:o,onFinish:s=(()=>{})})=>{try{const s=await fetch(e,t);if(s.ok){const e=await s.json();n(e)}else{o(`Error code: ${s.status}`)}}catch(e){o("Network or other error")}finally{s()}};const getSha=async(e,t)=>{const n=await fetch(e,{headers:{Authorization:`token ${t}`}});if(n.ok){const e=await n.json();return e.sha}return null};(function e(){elements.content.addEventListener("keydown",(function(e){if(e.key==="Enter"){const t=this.selectionStart;this.value=this.value.substring(0,t)+"\n"+this.value.substring(t);this.selectionStart=this.selectionEnd=t+1;e.preventDefault()}}))})();